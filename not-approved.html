<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Not Approved</title>
    <link id="themeStylesheet" href="/ban-new.css" rel="stylesheet" type="text/css" media="all">
    <style>
        .logout.warning-margin {
            margin: 20px auto 16px auto;
        }
        .evidence-image {
            max-width: 640px;
            height: auto;
            max-height: 300px;
            display: flex;
            margin-top: 8px;
            max-width: 100%;
        }
        .margins-for-img {
            margin-top: 2px;
            margin-left: 6px;
            margin-right: 6px;
        }
        audio {
            width: 100%;
            max-width: 400px;
            display: block;
            margin-top: 8px;
        }
        .evidence-box {
            margin-top: 0px;
            padding: 12px;
            display: block;
            border-radius: 0px;
        }
        .inneritem {
            display: block;
            margin: 0px;
        }
        .violation-section {
            margin-bottom: 0px;
            padding-left: 2px;
            padding-right: 2px;
        }
        .classic-violation {
            margin-bottom: 20px;
        }
        .viol {
            margin: 0px;
        }
        #evidenceheading {
            margin: 0px;
            line-height: 1em;
            font-size: 18px;
        }
        #violationtype {
            font-size: 14px;
        }
        .ban-box {
            border-radius: 0px;
            max-width: 805px;
        }
        #abideRules {
            line-height: 1;
        }
        .logoutlink {
            color: #222;
        }
    </style>
    <div id="header">
        <b id="username">Username</b>
    </div><br>
</head>
<body>
    <div class="ban-box">
        <h3 id="banDuration">Banned</h3>
        <p id="usernameItem" style="display:none">Addressed to: <b id="usernameB">Username</b></p>
        <p id="cautionWarningMessage" style="display:none"></p>
        <p id="termsOfUse">We have determined that your recent behaviour or actions on Boiby have been in violation of our <a href="/info/terms">Terms of Use</a>.</p>
        <p id="reviewedContainer">Reviewed: <b id="reviewedDate">21/02/2025 01:48:00</b></p>
        <p id="detection">Decision: <b id="detectionField">Not Automated: Manually detected and reviewed</b></p>
        <p id="messageToUser">Moderator Note: <b id="moderatorNote"></b></p>
        <div class="evidence-box" id="evidenceContainer"></div>
        <p id="communityRules">Remember to abide by the <a href="/info/community-rules">Boiby Community Rules</a> so Boiby can be a safe and enjoyable place for everyone.</p>
        <p id="reactivateMessage">Your account has been suspended. Your suspension ends on <b id="reactivateDate">21/02/2025 01:48:00</b>.</p>
        <p id="membershipNotice" style="display:none">You currently have a Boiby Premium membership that is set to renew on (15daysfromnow). Your membership has been automatically cancelled.</p>
        <p id="appealsMessage">If you wish to appeal, please contact us via the <a href="/appeals-form">Appeals Form</a>.</p>
        <button id="reactivateButton" class="reactivate">Re-activate Account</button>
        <button class="logout"><a href="https://boibyban.github.io" class="logoutlink">Logout</a></button>
    </div>
<script>
// Translation system for title and punishment types only
const translations = {
    en: {
        // Punishment types
        "Title.Warn": "Warning",
        "Title.Test": "Test Punishment", // unused
        "Title.Ban3Hours": "Banned for 3 Hours",
        "Title.Ban1Day": "Banned for 1 Day",
        "Title.Ban2Days": "Banned for 2 Days",
        "Title.Ban3Days": "Banned for 3 Days",
        "Title.Ban7Days": "Banned for 7 Days",
        "Title.Ban14Days": "Banned for 14 Days",
        "Title.Ban30Days": "Banned for 30 Days", // unused
        "Title.Ban60Days": "Banned for 60 Days",
        "Title.Ban6Months": "Banned for 6 Months",
        "Title.Ban1Year": "Banned for 1 Year",
        "Title.AccountBanned": "Account Banned", // unused for now
        "Title.Ban1Week": "Banned for 1 Week", // no longer used
        "Title.Ban2Weeks": "Banned for 2 Weeks", // no longer used
        "Title.Ban1Month": "Banned for 1 Month", // no longer used
        "Title.Suspend3Hours": "Suspended for 3 Hours",
        "Title.Suspend1Day": "Suspended for 1 Day",
        "Title.Suspend2Days": "Suspended for 2 Days",
        "Title.Suspend3Days": "Suspended for 3 Days",
        "Title.Suspend7Days": "Suspended for 7 Days",
        "Title.Suspend14Days": "Suspended for 14 Days",
        "Title.Suspend30Days": "Suspended for 30 Days",
        "Title.Suspend60Days": "Suspended for 60 Days",
        "Title.Suspend6Months": "Suspended for 6 Months",
        "Title.Suspend1Year": "Suspended for 1 Year",
        "Title.Delete": "Account Deleted",  // deprecated
        "Title.Terminate": "Account Terminated",
        "Title.PermanentlyBanned": "Permanently Banned", // unused
        "Title.UnusedTestReminderWhyDoIHaveThisIDontKnow": "Reminder" // unused
    }
};

const formData = JSON.parse(localStorage.getItem('banFormData'));
if (formData) {
    const language = 'en'; // Default to English
    
    // Punishment type mapping using translations
    const banDurationMap = {
        Warn: translations[language]["Title.Warn"],
        Ban3Hours: translations[language]["Title.Ban3Hours"],
        Ban1Day: translations[language]["Title.Ban1Day"],
        Ban2Days: translations[language]["Title.Ban2Days"],
        Ban3Days: translations[language]["Title.Ban3Days"],
        Ban7Days: translations[language]["Title.Ban7Days"],
        Ban14Days: translations[language]["Title.Ban14Days"],
        Ban60Days: translations[language]["Title.Ban60Days"],
        Ban6Months: translations[language]["Title.Ban6Months"],
        Ban1Year: translations[language]["Title.Ban1Year"],
        Delete: translations[language]["Title.Terminate"],
    };

    document.getElementById('banDuration').textContent = banDurationMap[formData.state] || "Banned";

    const moderatorNote = formData.customNote || (formData.note === "nonote" ? "" : formData.note) || "";
    document.getElementById('moderatorNote').textContent = moderatorNote;

    function formatDate(date, includeTime = true) {
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const year = date.getFullYear();
        if (includeTime) {
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const seconds = String(date.getSeconds()).padStart(2, '0');
            return `${day}/${month}/${year} ${hours}:${minutes}:${seconds}`;
        } else {
            return `${day}/${month}/${year}`;
        }
    }

    const now = new Date();
    const reviewedDate = formatDate(now);
    document.getElementById('reviewedDate').textContent = reviewedDate;

    const automationTextMap = {
        "manual": "",
        "manual_detect_auto_review": "Automation was used when making this decision.",
        "auto_detect_manual_review": "This violation was detected using automation.",
        "full_auto": "This violation was detected using automation, and automation was used making this decision."
    };
    
    const automationText = automationTextMap[formData.automation];
    if (formData.automation === "manual" || !automationText) {
        document.getElementById('detection').style.display = "none";
    } else {
        document.getElementById('detectionField').textContent = automationText;
    }

    function addReactivateTextForWarnings() {
        if (formData.state === "Warn") {
            const appealsMessage = document.getElementById('appealsMessage');
            const reactivateText = document.createElement('p');
            reactivateText.textContent = "By re-activating your account, you agree to our Terms of Use.";
            reactivateText.style.marginTop = "10px"; 
            appealsMessage.insertAdjacentElement('afterend', reactivateText);
        }
    }

    const logoutButton = document.querySelector('.logout');
    if (formData.state === "Warn") {
        document.getElementById('reactivateMessage').style.display = "none";
        document.getElementById('reactivateMessage').textContent = "By re-activating your account, you agree to our Terms of Use.";
        document.getElementById('reactivateButton').style.display = "block";
        document.getElementById('membershipNotice').outerHTML = "";
        logoutButton.classList.add('warning-margin');
        addReactivateTextForWarnings();
    } else if (formData.state === "Delete") {
        document.getElementById('reactivateMessage').textContent = "Your account has been terminated.";
        document.getElementById('membershipNotice').outerHTML = "";
        document.getElementById('cautionWarningMessage').outerHTML = "";
        document.getElementById('reactivateButton').outerHTML = "";
    } else {
        const banDurationHoursMap = {
            Ban3Hours: 3,
            Ban1Day: 24,
            Ban2Days: 48,
            Ban3Days: 72,
            Ban7Days: 168, 
            Ban14Days: 336, 
            Ban60Days: 1440, 
            Ban6Months: 4392, 
            Ban1Year: 8760, 
        };
        const banDurationHours = banDurationHoursMap[formData.state] || 0;
        const reactivateDate = new Date(now.setHours(now.getHours() + banDurationHours));
        document.getElementById('reactivateDate').textContent = formatDate(reactivateDate);
        document.getElementById('reactivateButton').style.display = "none";
    }

    const cautionWarningMap = {
        "3hours": "If you violate the Community Rules again, your account may be suspended for at least 3 hours.",
        "1day": "If you violate the Community Rules again, your account may be suspended for at least 1 day.",
        "2days": "If you violate the Community Rules again, your account may be suspended for at least 2 days.",
        "3days": "If you violate the Community Rules again, your account may be suspended for at least 3 days.",
        "7days": "If you violate the Community Rules again, your account may be suspended for at least 7 days.",
        "14days": "If you violate the Community Rules again, your account may be suspended for at least 14 days.",
        "future": "If you violate the Community Rules again, your account may be suspended in the future.",
        "permanent": "If you violate the Community Rules again, your account may be permanently banned."
    };

    const cautionWarningMessage = document.getElementById('cautionWarningMessage');
    if (formData.cautionWarning && formData.cautionWarning !== "none" && (formData.state === "Warn" || formData.state.startsWith("Ban"))) {
        const cautionText = cautionWarningMap[formData.cautionWarning];
        cautionWarningMessage.innerHTML = `<span style="color: red; font-weight: bold;">CAUTION</span> ${cautionText}`;
        cautionWarningMessage.style.display = "block";
        cautionWarningMessage.style.fontWeight = "500";
    }

    const membershipNotice = document.getElementById('membershipNotice');
    if (formData.premiumMembership && formData.state === "Delete") {
        const renewalDate = new Date(now);
        renewalDate.setDate(renewalDate.getDate() + 15);
        membershipNotice.innerHTML = `You currently have a Boiby Premium membership that is set to renew on ${formatDate(renewalDate, false)}. Your membership has been automatically cancelled.`;
        membershipNotice.style.display = "none";
    }

    const evidenceContainer = document.getElementById('evidenceContainer');
    if (formData.classicViolations && formData.classicViolations.length > 0) {
    formData.classicViolations.forEach((violation, index) => {
        const violationDetails = document.createElement('div');
        violationDetails.classList.add('violation-section');

        // Determine severity
        let severityClass = 'severity-mild';
        let severityText = 'Mild';
        
        const severeReasons = [
            "Terrorism/Extremism", "Boiby Endangerment", "Adult Content", 
            "Sexual Content", "Child Safety", "Account Theft", 
            "Real-Life Threats", "Dangerous Activities", "Malicious Software",
            "Privacy: Sharing PII", "Privacy: Asking for PII", "Doxxing",
            "Seeking Sexual Content", "Abuse of Boiby Employees", 
            "Illegal and Regulated Content", "Minimum Age Requirement",
            "Real-World Tragic Events"
        ];
        
        const moderateReasons = [
            "Harassment", "Inappropriate", "Violent Content and Gore",
            "Discriminatory Content", "Cheats and Exploits", "Modified Client",
            "Ban Evasion", "Extortion and Blackmail", "Scamming",
            "Misusing Boiby Systems", "Political Content", "Misinformation",
            "Boiby Economy", "Chargeback", "Directing Users Off-Platform",
            "Contests and Sweepstakes", "Gambling Content", "Impersonation",
            "Disruptive Audio", "Dating and Romantic Content",
            "Intellectual Property Violation", "Other"
        ];

        if (severeReasons.includes(violation.reason)) {
            severityClass = 'severity-severe';
            severityText = 'Severe';
        } else if (moderateReasons.includes(violation.reason)) {
            severityClass = 'severity-moderate';
            severityText = 'Moderate';
        }

        // Violation header
        const reasonElement = document.createElement('p');
        reasonElement.innerHTML = `Violation: <span class="violation-text">${violation.reason}</span> <span class="severity-tag ${severityClass}">${severityText}</span>`;
        violationDetails.appendChild(reasonElement);

        // Evidence container
        const evidenceElement = document.createElement('p');
        evidenceElement.textContent = 'Evidence:';
        violationDetails.appendChild(evidenceElement);

        // Evidence content
        const evidenceContent = document.createElement('div');
        evidenceContent.classList.add('evidence-item');
        
        const evidenceTypeElement = document.createElement('p');
        evidenceTypeElement.classList.add('evidence-type');
        evidenceTypeElement.textContent = `Type: ${violation.violationType}`;
        evidenceContent.appendChild(evidenceTypeElement);

        // Handle all evidence types
        const evidenceTextElement = document.createElement('p');
        
        if (violation.violationType === "Image") {
            const imgElement = document.createElement('img');
            imgElement.src = violation.evidence;
            imgElement.classList.add('evidence-image');
            evidenceContent.appendChild(imgElement);
        } else if (violation.violationType === "Voice Chat") {
            const date = new Date();
            date.setMinutes(date.getMinutes() - 5);
            const formattedDate = date.toLocaleString('en-US', { month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false });
            evidenceTextElement.textContent = `Conversation Time: ${formattedDate} Location: ${violation.evidence}`;
            evidenceContent.appendChild(evidenceTextElement);
        } else if (violation.violationType === "Audio") {
            const audioElement = document.createElement('audio');
            audioElement.controls = true;
            audioElement.src = violation.evidence;
            evidenceContent.appendChild(audioElement);
        } else {
            // Default text evidence
            evidenceTextElement.textContent = violation.evidence;
            evidenceContent.appendChild(evidenceTextElement);
        }

        violationDetails.appendChild(evidenceContent);
        evidenceContainer.appendChild(violationDetails);
    });
} else {
    evidenceContainer.remove();
}
}

function setTheme(theme) {
    const themeStylesheet = document.getElementById('themeStylesheet');
    if (theme === "dark") {
        themeStylesheet.href = "/ban-new-dark.css"; 
    } else {
        themeStylesheet.href = "/ban-new.css";
    }
}

const savedTheme = localStorage.getItem('theme') || "light"; 
setTheme(savedTheme);

const savedUsername = localStorage.getItem('username');
if (savedUsername) {
    document.getElementById('username').textContent = savedUsername;
    document.getElementById('usernameB').textContent = savedUsername;
}
</script>
</body>
</html>
