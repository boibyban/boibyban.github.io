<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buy Boiby Pro</title>
  <style>
    :root {
      --blue: #0071e3;
      --border: #d2d2d7;
      --text: #1d1d1f;
      --muted: #6e6e73;
      --bg: #fff;
      --page-max: 1200px;
      --page-padding: 18px;
    }

    /* Page layout */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      transition: opacity 0.3s ease;
    }

    header {
      text-align: center;
      padding: 28px 16px;
      border-bottom: 1px solid var(--border);
      transition: all 0.3s ease;
    }

    h1 { font-size: 2rem; font-weight: 600; margin: 0; }

    /* center content and prevent edge-to-edge stretching */
    .container {
      max-width: var(--page-max);
      margin: 0 auto;
      padding: 0 var(--page-padding);
      box-sizing: border-box;
    }

    main { padding: 20px 0 90px; } /* bottom space so checkout doesn't overlap content */

    .models { margin: 0 auto; padding: 20px 0; display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 25px; }

    .card { border: 1px solid var(--border); border-radius: 16px; padding: 20px; background: #fff; transition: box-shadow .15s, transform .06s; display: flex; flex-direction: column; }
    .card:hover { border-color: var(--blue); transform: translateY(-2px); }
    .card-content { display: flex; gap: 15px; margin-bottom: 15px; }
    .card-image { width: 140px; height: 140px; border-radius: 0px; overflow: hidden; background: #fff; display: flex; align-items: center; justify-content: center; }
    .card-image img { max-width: 100%; max-height: 100%; transition: opacity 0.3s ease; }
    .card-details { flex: 1; }
    .card h2 { font-size: 1.3rem; margin: 0 0 6px; font-weight: 600; }
    .price { font-size: 1.05rem; font-weight: 500; margin: 6px 0 12px; color: var(--muted); }
    .card ul { margin: 0; padding-left: 20px; color: var(--muted); font-size: 0.9rem; }
    .color-display { padding: 6px 12px; border: 1px solid var(--border); border-radius: 999px; font-size: 0.9rem; margin: 10px 0; text-align: center; background: #f9f9f9; }
    .select-btn { margin-top: auto; padding: 10px 0; background: var(--blue); color: #fff; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: background .2s; }
    .select-btn:hover { background: #005bb5; }
    .back-btn { margin: 10px 0 20px; padding: 8px 18px; background: #f5f5f7; border: none; border-radius: 999px; cursor: pointer; font-size: 0.95rem; }
    .back-btn:hover { background: #e6e6e9; }
    .hero { margin-bottom: 24px; }
    .hero-title { font-size: clamp(1.8rem, 4vw, 2.4rem); font-weight: 700; letter-spacing: -0.02em; line-height: 1.2; margin: 0 0 12px; }
    .hero-content { display: flex; gap: 30px; align-items: flex-start; }
    .hero-image { width: 320px; flex-shrink: 0; border-radius: 0px; overflow: hidden; background: #fff; }
    .hero-image img { width: 100%; display: block; transition: opacity 0.3s ease; }
    .hero-list { list-style: none; padding: 0; margin: 0; color: var(--muted); flex: 1; }
    .hero-list li { font-size: 1rem; line-height: 1.6; margin: 6px 0; }
    .group { margin: 24px 0; position: relative; }
    .group h3 { font-size: 1.1rem; margin: 0 0 10px; display: flex; align-items: center; gap: 8px; }
    .pill { display: flex; justify-content: space-between; align-items: center; padding: 18px 20px; border: 1px solid var(--border); border-radius: 12px; margin: 10px 0; cursor: pointer; background: #fff; transition: border-color .12s, box-shadow .12s, transform .06s; }
    .pill:hover { border-color: var(--blue); transform: translateY(-2px); }
    .pill.selected { border: 2px solid var(--blue); box-shadow: 0 4px 14px rgba(0,113,227,0.08); }
    .pill.disabled { opacity: .6; cursor: not-allowed; background: #fbfbfb; }
    .pill .label { font-weight: 600; }
    .pill .price-right { color: var(--muted); font-weight: 600; white-space: nowrap; }
    .note { font-size: .9rem; color: var(--muted); margin-top: 6px; }
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
    .modal-overlay.visible { opacity: 1; visibility: visible; }
    .modal { background: white; border-radius: 16px; padding: 24px; max-width: 800px; width: 92%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transform: translateY(20px); transition: transform 0.3s ease; }
    .modal-overlay.visible .modal { transform: translateY(0); }
    .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .modal-title { font-size: 1.4rem; font-weight: 600; margin: 0; }
    .modal-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--muted); }
    .modal-content { line-height: 1.6; }
    .modal-content p { margin: 0 0 16px; }
    .chip-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0; }
    .chip-card { border: 1px solid var(--border); border-radius: 12px; padding: 20px; text-align: center; }
    .chip-card h4 { margin: 0 0 10px; font-size: 1.1rem; color: var(--blue); }
    .chip-card ul { text-align: left; margin: 0; padding-left: 20px; font-size: 0.9rem; }
    .chip-specs { margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border); font-size: 0.9rem; }

    /* Checkout is full-width visually but content is constrained via .container inside it */
    .checkout {
      position: sticky;
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      box-sizing: border-box;
      background: #fff;
      border-top: 1px solid var(--border);
      padding: 12px 0;
      z-index: 100;
      overflow-x: hidden;
    }
    .checkout .inner {
      max-width: var(--page-max);
      margin: 0 auto;
      padding: 0 var(--page-padding);
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .total { font-size: 1.4rem; font-weight: 700; }
    .add-to-bag { padding: 12px 22px; font-size: 1.05rem; background: var(--blue); color: #fff; border: none; border-radius: 999px; cursor: pointer; transition: background .2s; }
    .add-to-bag:hover { background: #005bb5; }
    .confirmation { text-align: center; display: none; }
    .confirmation-image { width: 300px; margin: 0 auto 20px; border-radius: 0px; overflow: hidden; }
    .confirmation-image img { width: 100%; }
    .confirmation-details { max-width: 800px; margin: 0 auto; text-align: left; background: #f9f9f9; padding: 20px; border-radius: 12px; }
    .confirmation-title { font-size: 2.2rem; margin-bottom: 10px; color: #0071e3; }
    .confirmation-model { font-size: 1.4rem; margin-bottom: 20px; }
    .confirmation-list { list-style: none; padding: 0; margin: 0 0 20px; }
    .confirmation-list li { padding: 8px 0; border-bottom: 1px solid #eee; }
    .confirmation-total { font-size: 1.6rem; font-weight: 700; text-align: center; margin-top: 20px; }

    @media (max-width: 900px) { .models { grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); } .hero-content { flex-direction: column; } .hero-image { width: 100%; max-width: 320px; margin: 0 auto; } .chip-grid { grid-template-columns: 1fr; } }
    @media (max-width: 600px) { .pill { padding: 14px; } .checkout .inner { flex-direction: column; align-items: stretch; text-align: center; } .add-to-bag { width: 100%; } .card-content { flex-direction: column; } .card-image { width: 100%; height: 180px; margin-bottom: 15px; } }
  </style>
</head>
<body>
  <header>
    <h1 id="headerTitle">Buy Boiby Pro</h1>
  </header>

  <main>
    <!-- center the page contents so pills/selectors don't touch the screen edges -->
    <div class="container">
      <div class="models" id="models"><!-- cards inserted by JS --></div>

      <div class="configurator" id="configurator" style="display:none;">
        <button class="back-btn" id="backBtn">← Back</button>
        <div class="hero">
          <h2 class="hero-title" id="heroTitle"></h2>
          <div class="hero-content">
            <div class="hero-image" id="heroImage"></div>
            <ul class="hero-list" id="heroList"></ul>
          </div>
        </div>
        <div id="options"></div>
      </div>

      <div class="confirmation" id="confirmation">
        <h2 class="confirmation-title">Order Confirmed</h2>
        <div class="confirmation-image" id="confirmationImage"></div>
        <h3 class="confirmation-model" id="confirmationModel"></h3>
        <div class="confirmation-details">
          <h4>Order Summary:</h4>
          <ul class="confirmation-list" id="confirmationList"></ul>
          <div class="confirmation-total" id="confirmationTotal"></div>
        </div>
        <button class="back-btn" id="confirmationBackBtn" style="margin-top: 30px;">Back to Store</button>
      </div>
    </div>
  </main>

  <!-- Accelerator/NPU tooltip removed as requested -->

  <div class="checkout" id="checkout">
    <div class="inner">
      <div class="total" id="finalPrice">Total: A$0</div>
      <button class="add-to-bag" id="addToBagBtn">Add to Bag</button>
    </div>
  </div>

  <script>
    (function () {
      const selectedColor = 'Silver';

      const template = {
        "B5 Ultra": {
          price: 9999,
          ports: [
            "Eight Thunderbolt 5 (USB-C) ports",
            "Four USB 3.1 (Type-A) ports",
            "Two 10 Gigabit Ethernet ports",
            "Three 3.5mm Audio Jacks (Combo Front + In/Out Rear)"
          ],
          upgrades: {
            chip: [
              "Boiby B5 Ultra 32-core CPU (base)",
              "Boiby B5 Ultra 40-core CPU (+A$2500)"
            ],
            memory: [
              "64 GB (4 x 16 GB) DDR5-6000 ECC Memory (base)",
              "96 GB (6 x 16 GB) DDR5-6000 ECC Memory (+A$400)",
              "192 GB (6 x 32 GB) DDR5-6000 ECC Memory (+A$1200)",
              "384 GB (6 x 64 GB) DDR5-6000 ECC Memory (+A$2800)",
              "768 GB (6 x 128 GB) DDR5-6000 ECC Memory (+A$6000)"
            ],
            storage: [
              "2 TB PCIe Gen 5 SSD storage (base)",
              "4 TB PCIe Gen 5 SSD storage (+A$400)",
              "8 TB PCIe Gen 5 SSD storage (+A$1200)",
              "16 TB PCIe Gen 5 SSD storage (+A$3600)",
              "32 TB PCIe Gen 5 SSD storage (+A$8400)"
            ],
            gpu: [
              "AMD Radeon PRO W7600 with 8 GB Video Memory (base)",
              "AMD Radeon PRO W7700 with 16 GB Video Memory (+A$1000)",
              "AMD Radeon PRO W7800 with 32 GB Video Memory (+A$2000)",
              "AMD Radeon PRO W7900 with 48 GB Video Memory (+A$5500)",
              "AMD Radeon PRO W7900 Duo with 96 GB Video Memory (+A$9000)",
              "2x AMD Radeon PRO W7900 Duo with 192 GB Video Memory (+A$17000)"
            ],
            npu: [
              "No Neural Accelerator (base)",
              "Boiby N1X (36-core NPU) with 48 GB HBM3 memory (+A$3500)",
              "Boiby N1X Plus (48-core NPU) with 64 GB HBM3 memory (+A$7000)"
            ],
            media_accelerator: [
              "No Encoding Accelerator (base)",
              "Boiby Media Encode Accelerator (+A$2000)"
            ],
            io: [
              "No Extra I/O card (base)",
              "4 Thunderbolt 5 port PCIe card (+A$800)"
            ],
            display: [
              "No Monitor (base)",
              "Boiby Studio Display - 27-inch 5K OLED, 120Hz (+A$2199)",
              "Boiby Pro Displays - 32-inch 6K OLED, 120Hz (+A$7499)",
              "Dual Boiby Pro Displays - 32-inch 6K OLED, 120Hz (+A$14998)",
              "Boiby Ultra Display - 36-inch 7K Tandem OLED, 120Hz (+A$15999)",
              "Dual Boiby Ultra Displays - 36-inch 7K Tandem OLED, 120Hz (+A$31998)"
            ],
            chassis: [
              "Standard feet (base)",
              "Add elevated feet (+A$99)",
              "Add wheels (+A$249)"
            ],
            accessories: [
              "No Accessories (base)",
              "Boiby Pro Mouse + Keyboard (+A$300)",
            ]
          }
        },
        "B5 Extreme": {
          price: 17999,
          ports: [
            "Ten Thunderbolt 5 (USB-C) ports",
            "Four USB 3.1 (Type-A) ports",
            "Two 10 Gigabit Ethernet ports",
            "Three 3.5mm Audio Jacks (Combo Front + In/Out Rear)"
          ],
          upgrades: {
            chip: [
              "Boiby B5 Extreme 64-core CPU (base)",
              "Boiby B5 Extreme 80-core CPU (+A$4500)"
            ],
            memory: [
              "128 GB (4 x 16 GB) DDR5-6000 ECC Memory (base)",
              "192 GB (6 x 32 GB) DDR5-6000 ECC Memory (+A$800)",
              "384 GB (6 x 64 GB) DDR5-6000 ECC Memory (+A$2400)",
              "768 GB (6 x 128 GB) DDR5-6000 ECC Memory (+A$5600)",
              "1.5 TB (12 x 128 GB) DDR5-6000 ECC Memory (+A$12000)",
              "3 TB (12 x 256 GB) DDR5-6000 ECC Memory (+A$24000)"
            ],
            storage: [
              "2 TB PCIe Gen 5 SSD storage (base)",
              "4 TB PCIe Gen 5 SSD storage (+A$400)",
              "8 TB PCIe Gen 5 SSD storage (+A$1200)",
              "16 TB PCIe Gen 5 SSD storage (+A$3600)",
              "32 TB PCIe Gen 5 SSD storage (+A$8400)"
            ],
            gpu: [
              "AMD Radeon PRO W7600 with 8 GB Video Memory (base)",
              "AMD Radeon PRO W7700 with 16 GB Video Memory (+A$1000)",
              "AMD Radeon PRO W7800 with 32 GB Video Memory (+A$2000)",
              "AMD Radeon PRO W7900 with 48 GB Video Memory (+A$5500)",
              "AMD Radeon PRO W7900 Duo with 96 GB Video Memory (+A$9000)",
              "2x AMD Radeon PRO W7900 Duo with 192 GB Video Memory (+A$17000)"
            ],
            npu: [
              "No Neural Accelerator (base)",
              "Boiby N1X (36-core NPU) with 48 GB HBM3 memory (+A$3000)",
              "Boiby N1X Plus (48-core NPU) with 64 GB HBM3 memory (+A$5000)"
            ],
            media_accelerator: [
              "No Encoding Accelerator (base)",
              "Boiby Media Encode Accelerator (+A$2000)"
            ],
            io: [
              "No Extra I/O card (base)",
              "4 Thunderbolt 5 port PCIe card (+A$800)"
            ],
            display: [
              "No Monitor (base)",
              "Boiby Studio Display - 27-inch 5K OLED, 120Hz (+A$2199)",
              "Boiby Pro Displays - 32-inch 6K OLED, 120Hz (+A$7499)",
              "Dual Boiby Pro Displays - 32-inch 6K OLED, 120Hz (+A$14998)",
              "Boiby Ultra Display - 36-inch 7K Tandem OLED, 120Hz (+A$15999)",
              "Dual Boiby Ultra Displays - 36-inch 7K Tandem OLED, 120Hz (+A$31998)"
            ],
            chassis: [
              "Standard feet (base)",
              "Add elevated feet (+A$99)",
              "Add wheels (+A$249)"
            ],
            accessories: [
              "None (base)",
              "Boiby Pro Mouse + Keyboard (+A$300)",
            ]
          }
        }
      };

      const addons = {};

      const baseConfigs = JSON.parse(JSON.stringify(template));
      let selectedModel = null;
      let selectedOptions = {};

      const $ = q => document.querySelector(q);
      const $$ = q => Array.from(document.querySelectorAll(q));
      const cleanLabel = opt => (opt||'').split("(+A$")[0].replace(/\s+\(base\)/i,'').trim();
      const priceDelta = opt => {
        if (!opt) return 0;
        const m = opt.match(/\+A\$(\d+)/);
        return m ? parseInt(m[1],10) : 0;
      };
      const formatPrice = n => `A$${n.toLocaleString('en-AU')}`;

      function findGroupByName(name) {
        const groups = $$('#options .group');
        return groups.find(g => g.querySelector('h3') && g.querySelector('h3').innerText.toLowerCase() === name.toLowerCase());
      }

      function renderModels() {
        const container = $('#models');
        if (!container) return;
        container.innerHTML = '';
        const configs = baseConfigs;
        Object.keys(configs).forEach(model => {
          const cfg = configs[model];
          const card = document.createElement('div');
          card.className = 'card';
          card.setAttribute('data-model', model);

          const imageUrl = `BoibyPro${model.replace(/\s+/g,'')}.png`;

          card.innerHTML = `
            <div class="card-content">
              <div class="card-image">
                <img src="${imageUrl}" alt="${model} ${selectedColor}" id="card-image-${model.replace(/\s+/g, '-')}">
              </div>
              <div class="card-details">
                <h2>Boiby Pro - ${model}</h2>
                <p class="price">From ${formatPrice(cfg.price)}</p>
                <ul>
                  <li>Ports: ${cfg.ports.slice(0,1)}</li>
                  <li>${cleanLabel(cfg.upgrades.chip[0])}</li>
                  <li>${cleanLabel(cfg.upgrades.memory[0])}</li>
                </ul>
              </div>
            </div>
            <div class="color-display">Color: ${selectedColor}</div>
            <button class="select-btn" data-model="${model}">Select</button>
          `;

          card.querySelector('.select-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            selectedModel = e.target.getAttribute('data-model');
            const modelsEl = $('#models'); if (modelsEl) modelsEl.style.display = 'none';
            $('#configurator').style.display = 'block';
            // scroll configurator into view neatly
            setTimeout(() => { document.getElementById('heroTitle')?.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 50);
            showConfigurator();
          });

          container.appendChild(card);
        });
      }

      function showConfigurator() {
        const cfg = baseConfigs[selectedModel];
        const optionsDiv = $('#options');
        optionsDiv.innerHTML = '';
        selectedOptions = {};

        $('#heroTitle').innerText = `Customise your Boiby Pro — ${selectedModel}`;
        $('#heroImage').innerHTML = `<img src="BoibyPro${selectedModel.replace(/\s+/g,'')}.png" alt="${selectedModel} ${selectedColor}">`;

        // Upgrades rendering
        Object.keys(cfg.upgrades).forEach(category => {
          const group = document.createElement('div');
          group.className = 'group';
          const h3 = document.createElement('h3');

          // simple headings (no tooltips)
          h3.innerText = category.charAt(0).toUpperCase() + category.slice(1);
          group.appendChild(h3);

          cfg.upgrades[category].forEach((opt, idx) => {
            const pill = document.createElement('div');
            pill.className = 'pill';
            pill.dataset.cat = category;
            pill.dataset.value = opt;
            pill.innerHTML = `<span class="label">${cleanLabel(opt)}</span><span class="price-right">${priceDelta(opt) ? ('+A$' + priceDelta(opt)) : ''}</span>`;

            pill.addEventListener('click', () => {
              if (pill.classList.contains('disabled')) return;
              // single-select behavior for all categories
              Array.from(group.querySelectorAll('.pill')).forEach(s => s.classList.remove('selected'));
              pill.classList.add('selected');
              selectedOptions[category] = pill.dataset.value;
              renderHeroSummary(); updatePrice();
            });

            // Default selection
            if (idx === 0) { pill.classList.add('selected'); selectedOptions[category] = pill.dataset.value; }

            group.appendChild(pill);
          });

          optionsDiv.appendChild(group);
        });

        renderHeroSummary(); updatePrice();
      }

      function renderHeroSummary() {
        const list = $('#heroList'); if (!list) return; list.innerHTML = '';
        const cfg = baseConfigs[selectedModel];
        list.appendChild(li(`Boiby Pro — ${selectedModel}`));
        list.appendChild(li(`Color: ${selectedColor}`));
        list.appendChild(li('Ports:'));
        cfg.ports.forEach(port => list.appendChild(li(`• ${port}`)));
        const order = ['chip','memory','storage','gpu','npu','io','display','chassis','accessories','media_accelerator'];
        order.forEach(cat => { if (selectedOptions[cat]) list.appendChild(li(cleanLabel(selectedOptions[cat]))); });
      }

      function updatePrice() {
        const cfg = baseConfigs[selectedModel]; let price = cfg.price;
        Object.keys(selectedOptions).forEach(cat => {
          price += priceDelta(selectedOptions[cat]);
        });
        $('#finalPrice').innerText = `Total: ${formatPrice(price)}`;
      }

      function showConfirmation() {
        const cfg = baseConfigs[selectedModel]; let price = cfg.price;
        $('#configurator').style.display = 'none'; $('#checkout').style.display = 'none'; $('#confirmation').style.display = 'block';
        $('#confirmationImage').innerHTML = `<img src="BoibyPro${selectedModel.replace(/\s+/g,'')}.png" alt="${selectedModel} ${selectedColor}">`;
        $('#confirmationModel').textContent = `Boiby Pro ${selectedModel} - ${selectedColor}`;
        const list = $('#confirmationList'); list.innerHTML = '';
        list.appendChild(li(`Model: Boiby Pro ${selectedModel}`)); list.appendChild(li(`Color: ${selectedColor}`));
        ['chip','memory','storage','gpu','npu','io','display','chassis','accessories','media_accelerator'].forEach(k => { if (selectedOptions[k]) list.appendChild(li(cleanLabel(selectedOptions[k]))); });
        Object.keys(selectedOptions).forEach(cat => { price += priceDelta(selectedOptions[cat]); });
        $('#confirmationTotal').textContent = `Total: ${formatPrice(price)}`;
      }

      function li(text) { const el = document.createElement('li'); el.textContent = text; return el; }

      const backBtn = $('#backBtn'); if (backBtn) backBtn.addEventListener('click', () => { $('#configurator').style.display = 'none'; $('#models').style.display = 'grid'; window.scrollTo({ top: 0, behavior: 'smooth' }); });
      const confirmationBackBtn = $('#confirmationBackBtn'); if (confirmationBackBtn) confirmationBackBtn.addEventListener('click', () => { $('#confirmation').style.display = 'none'; $('#models').style.display = 'grid'; $('#checkout').style.display = 'block'; window.scrollTo({ top: 0, behavior: 'smooth' }); });
      const addToBagBtn = $('#addToBagBtn'); if (addToBagBtn) addToBagBtn.addEventListener('click', showConfirmation);

      document.addEventListener('DOMContentLoaded', () => { renderModels(); });
      window.__boiby_pro_reloadModels = renderModels;
    })();
  </script>
</body>
</html>
