<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BoibyBook Pro - Purchase</title>
  <style>
    :root {
      --blue: #0071e3;
      --border: #d2d2d7;
      --text: #1d1d1f;
      --muted: #6e6e73;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 0;
      background: #fff;
      color: var(--text);
    }
    header { text-align: center; padding: 30px 10px; border-bottom: 1px solid var(--border); }
    h1 { font-size: 2rem; font-weight: 600; margin: 0; }

    .tabs { display: flex; justify-content: center; gap: 12px; margin: 20px 0; }
    .tab { padding: 10px 20px; cursor: pointer; border: 1px solid var(--border); border-radius: 20px; }
    .tab.active { background: var(--blue); color: white; border-color: var(--blue); }

    .models, .configurator { max-width: 900px; margin: auto; padding: 20px; }
    .models { display: flex; flex-direction: column; gap: 20px; }
    .card { border: 1px solid var(--border); border-radius: 20px; padding: 20px; text-align: left; box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; transition: transform 0.2s; }
    .card:hover { transform: scale(1.02); }
    .card h2 { font-size: 1.4rem; margin: 0 0 6px; }
    .price { font-size: 1.1rem; font-weight: 500; margin: 6px 0 14px; }
    .card ul { margin: 0; padding-left: 20px; }

    .back-btn { margin: 10px 0 20px; padding: 8px 18px; background: #f2f2f2; border: none; border-radius: 20px; cursor: pointer; font-size: 0.95rem; }
    .back-btn:hover { background: #e0e0e0; }

    .hero { margin-bottom: 28px; }
    .hero-title { font-size: clamp(1.8rem, 4.2vw, 3rem); font-weight: 700; letter-spacing: -0.02em; line-height: 1.15; margin: 0 0 18px; }
    .hero-list { list-style: none; padding: 0; margin: 0; }
    .hero-list li { font-size: 1.05rem; line-height: 1.7; margin: 10px 0; }

    .group { margin: 28px 0; }
    .group h3 { font-size: 1.15rem; margin: 0 0 12px; }

    .pill { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin: 12px 0; padding: 30px 20px; border: 1px solid var(--border); border-radius: 16px; cursor: pointer; transition: border-color .2s, box-shadow .2s; font-size: 1.05rem; }
    .pill .label { font-weight: 600; }
    .pill .price-right { color: var(--muted); font-weight: 600; white-space: nowrap; }
    .pill:hover { border-color: var(--blue); }
    .pill.selected { border: 2px solid var(--blue); box-shadow: 0 0 0 2px rgba(0,113,227,0.15) inset; }
    .pill.disabled { color: var(--muted); cursor: not-allowed; background: #f9f9f9; }

    .note { font-size: 0.9rem; color: var(--muted); margin-top: 6px; }

    .checkout { position: sticky; bottom: 0; left: 0; width: 100%; background: #fff; border-top: 1px solid var(--border); padding: 20px 30px; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 12px; box-shadow: 0 -4px 10px rgba(0,0,0,0.05); z-index: 100; }
    .total { font-size: 1.5rem; font-weight: 700; }
    .add-to-bag { padding: 14px 26px; font-size: 1.2rem; background: var(--blue); color: white; border: none; border-radius: 999px; cursor: pointer; transition: background .2s; }
    .add-to-bag:hover { background: #005bb5; }
  </style>
</head>
<body>
  <header>
    <h1>Buy BoibyBook Pro</h1>
  </header>

  <div class="tabs">
    <div class="tab active" data-size="14">14-inch</div>
    <div class="tab" data-size="16">16-inch</div>
  </div>

  <div class="models" id="models"></div>

  <div class="configurator" id="configurator" style="display:none;">
    <button class="back-btn" id="backBtn">← Back</button>
    <div class="hero">
      <h2 class="hero-title" id="heroTitle"></h2>
      <ul class="hero-list" id="heroList"></ul>
    </div>
    <div id="options"></div>
    <div class="checkout">
      <div class="total" id="finalPrice"></div>
      <button class="add-to-bag">Add to Bag</button>
    </div>
  </div>

<script>
const tabs = document.querySelectorAll(".tab");
let selectedSize = "14";

tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    tabs.forEach(t => t.classList.remove("active"));
    tab.classList.add("active");
    selectedSize = tab.getAttribute("data-size");
    renderModels();
  });
});

const baseConfigs = {
  "14": {
    "B1 Pro": {
      price: 2999,
      name: "BoibyBook Pro B1",
      display: "14-inch Tandem OLED 120Hz display",
      upgrades: {
        chip: ["Boiby B1 Pro chip with 12-core CPU and 20-core GPU (base)", "Boiby B1 Pro chip with 14-core CPU and 24-core GPU (+A$300)"],
        memory: ["32 GB unified memory (base)", "48 GB unified memory (+A$200)", "64 GB unified memory (+A$400)", "96 GB unified memory (+A$600)"],
        storage: ["512 GB SSD storage (base)", "1 TB SSD storage (+A$100)", "2 TB SSD storage (+A$200)", "4 TB SSD storage (+A$400)", "8 TB SSD storage (+A$800)"],
        adapter: ["95 W USB-C Power Adapter (base)", "140W USB-C Power Adapter (+A$50)"],
        coating: ["No anti-reflective coating (base)", "Anti-reflective display coating (+A$100)"]
      }
    },
    "B1 Max": {
      price: 4499,
      name: "BoibyBook Pro B1 Max",
      display: "14-inch Tandem OLED 120Hz display",
      upgrades: {
        chip: ["Boiby B1 Max chip with 14-core CPU and 36-core GPU (base)", "Boiby B1 Max chip with 16-core CPU and 48-core GPU (+A$600)"],
        memory: ["48 GB unified memory (base)", "64 GB unified memory (+A$200)", "96 GB unified memory (+A$600)", "128 GB unified memory (+A$1200)", "256 GB unified memory (+A$2400)"],
        storage: ["1 TB SSD storage (base)", "2 TB SSD storage (+A$100)", "4 TB SSD storage (+A$300)", "8 TB SSD storage (+A$700)", "12 TB SSD storage (+A$1500)"],
        adapter: ["95 W USB-C Power Adapter (base)", "140W USB-C Power Adapter (+A$50)"],
        coating: ["No anti-reflective coating (base)", "Anti-reflective display coating (+A$100)"]
      }
    }
  },
  "16": {} // filled programmatically below
};

// Duplicate 14-inch configs for 16-inch with +$500 and storage adjustment
Object.keys(baseConfigs["14"]).forEach(model => {
  const base = JSON.parse(JSON.stringify(baseConfigs["14"][model]));
  base.price += 500;
  if (model === "B1 Pro") {
    base.upgrades.storage[0] = "1 TB SSD storage (base)";
  }
  baseConfigs["16"][model] = base;
});

function renderModels() {
  const container = document.getElementById("models");
  container.innerHTML = "";
  const configs = baseConfigs[selectedSize];
  for (let model in configs) {
    const c = configs[model];
    const card = document.createElement("div");
    card.className = "card";
    card.dataset.model = model;
    card.innerHTML = `<h2>${model}</h2><p class="price">From A$${c.price}</p><ul>
      <li>${c.display}</li>
      <li>${c.upgrades.chip[0].split(" (")[0]}</li>
      <li>${c.upgrades.memory[0].split(" (")[0]}</li>
      <li>${c.upgrades.storage[0].split(" (")[0]}</li>
      <li>${c.upgrades.adapter[0].split(" (")[0]}</li>
    </ul>`;
    card.addEventListener("click", () => {
      selectedModel = model;
      document.getElementById("models").style.display = "none";
      showConfigurator();
    });
    container.appendChild(card);
  }
}
let selectedModel = null;
let selectedOptions = {};

const cleanLabel = opt => opt.split("(")[0].trim();
const rightPrice = opt => {
  const m = opt.match(/\+A\$(\d+)/);
  return m ? `+A$${m[1]}` : '';
};

document.getElementById("backBtn").addEventListener("click", () => {
  document.getElementById("configurator").style.display = "none";
  document.getElementById("models").style.display = "flex";
});

function showConfigurator() {
  const config = baseConfigs[selectedSize][selectedModel];
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";
  selectedOptions = {};
  document.getElementById("heroTitle").innerText = `Customise your BoibyBook Pro — ${selectedModel}`;

  for (let category in config.upgrades) {
    const group = document.createElement("div");
    group.className = "group";
    const h3 = document.createElement("h3");
    h3.innerText = category.charAt(0).toUpperCase() + category.slice(1);
    group.appendChild(h3);

    config.upgrades[category].forEach((opt, idx) => {
      const pill = document.createElement("div");
      pill.className = "pill";
      pill.innerHTML = `<span class="label">${cleanLabel(opt)}</span><span class="price-right">${rightPrice(opt)}</span>`;

      // Disable dependent memory
      if (category === "memory") {
        if (selectedModel.includes("B1 Pro") && opt.includes("96 GB")) pill.classList.add("disabled");
        if (selectedModel.includes("B1 Max") && (opt.includes("128 GB") || opt.includes("256 GB"))) pill.classList.add("disabled");
      }

      pill.addEventListener("click", () => {
        if (pill.classList.contains("disabled")) return;
        group.querySelectorAll(".pill").forEach(p => p.classList.remove("selected"));
        pill.classList.add("selected");
        selectedOptions[category] = opt;

        // CPU → memory dependencies
        // CPU → memory dependencies
if (category === "chip") {
  const memoryGroup = Array.from(optionsDiv.querySelectorAll(".group"))
    .find(g => g.querySelector("h3").innerText.toLowerCase() === "memory");

  memoryGroup.querySelectorAll(".pill").forEach(p => p.classList.add("disabled"));

  if (selectedModel === "B1 Pro") {
    if (opt.includes("14-core")) {
      // Enable all memory options that are valid for 14-core
      memoryGroup.querySelectorAll(".pill").forEach(p => {
        if (!p.textContent.includes("96 GB") || opt.includes("14-core")) {
          p.classList.remove("disabled");
        }
      });
    } else {
      // Enable default lower memory options
      memoryGroup.querySelectorAll(".pill").forEach(p => {
        if (p.textContent.includes("32") || p.textContent.includes("48") || p.textContent.includes("64")) {
          p.classList.remove("disabled");
        }
      });
    }
  }

  if (selectedModel === "B1 Max") {
    if (opt.includes("48-core")) {
      // Enable only memory options allowed with 48-core
      memoryGroup.querySelectorAll(".pill").forEach(p => {
        if (!p.textContent.includes("128 GB") && !p.textContent.includes("256 GB")) {
          p.classList.remove("disabled");
        } else if (p.textContent.includes("128 GB") || p.textContent.includes("256 GB")) {
          p.classList.remove("disabled");
        }
      });
    } else {
      // Enable lower memory options
      memoryGroup.querySelectorAll(".pill").forEach(p => {
        if (!p.textContent.includes("128 GB") && !p.textContent.includes("256 GB")) {
          p.classList.remove("disabled");
        }
      });
    }
  }

  // If previously selected memory is now disabled, reset to first valid
  const selectedMem = selectedOptions.memory;
  if (selectedMem) {
    const memPill = Array.from(memoryGroup.querySelectorAll(".pill")).find(p => p.textContent === cleanLabel(selectedMem));
    if (memPill.classList.contains("disabled")) {
      const firstValid = Array.from(memoryGroup.querySelectorAll(".pill")).find(p => !p.classList.contains("disabled"));
      firstValid.classList.add("selected");
      selectedOptions.memory = firstValid.textContent;
    }
  }
}


        renderHeroSummary();
        updatePrice();
      });

      // select first non-disabled
      if (idx === 0 && !pill.classList.contains("disabled")) pill.classList.add("selected"), selectedOptions[category] = opt;

      group.appendChild(pill);
    });

    // Memory note
    if (category === "memory") {
      const note = document.createElement("div");
      note.className = "note";
      if (selectedModel === "B1 Pro") note.innerText = "96GB unified memory available on B1 Pro with 14-core CPU and 24-core GPU.";
      if (selectedModel === "B1 Max") note.innerText = "128GB/256GB unified memory available on B1 Max with 16-core CPU and 48-core GPU.";
      group.appendChild(note);
    }

    optionsDiv.appendChild(group);
  }

  document.getElementById("configurator").style.display = "block";
  renderHeroSummary();
  updatePrice();
}

function renderHeroSummary() {
  const list = document.getElementById("heroList");
  list.innerHTML = "";
  const config = baseConfigs[selectedSize][selectedModel];
  for (let category in config.upgrades) {
    if (selectedOptions[category]) list.appendChild(li(cleanLabel(selectedOptions[category])));
  }
}

function updatePrice() {
  let price = baseConfigs[selectedSize][selectedModel].price;
  for (let cat in selectedOptions) {
    const val = selectedOptions[cat];
    if (Array.isArray(val)) {
      val.forEach(v => { const m = v.match(/\+A\$(\d+)/); if (m) price += parseInt(m[1]); });
    } else {
      const m = val.match(/\+A\$(\d+)/); if (m) price += parseInt(m[1]);
    }
  }
  document.getElementById("finalPrice").innerText = `Total: A$${price}`;
}

function li(text) { const el = document.createElement('li'); el.textContent = text; return el; }

renderModels();
</script>
</body>
</html>
