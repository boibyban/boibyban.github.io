<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BoibyBook Pro - Purchase</title>
  <style>
    :root {
      --blue: #0071e3;
      --border: #d2d2d7;
      --text: #1d1d1f;
      --muted: #6e6e73;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 0;
      background: #fff;
      color: var(--text);
    }
    header { text-align: center; padding: 30px 10px; border-bottom: 1px solid var(--border); }
    h1 { font-size: 2rem; font-weight: 600; margin: 0; }

    .tabs { display: flex; justify-content: center; gap: 12px; margin: 20px 0; }
    .tab { padding: 10px 20px; cursor: pointer; border: 1px solid var(--border); border-radius: 20px; }
    .tab.active { background: var(--blue); color: white; border-color: var(--blue); }

    .models, .configurator { max-width: 900px; margin: auto; padding: 20px; }
    .models { display: flex; flex-direction: column; gap: 20px; }
    .card { border: 1px solid var(--border); border-radius: 20px; padding: 20px; text-align: left; box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; transition: transform 0.2s; }
    .card:hover { transform: scale(1.02); }
    .card h2 { font-size: 1.4rem; margin: 0 0 6px; }
    .price { font-size: 1.1rem; font-weight: 500; margin: 6px 0 14px; }
    .card ul { margin: 0; padding-left: 20px; }

    .back-btn { margin: 10px 0 20px; padding: 8px 18px; background: #f2f2f2; border: none; border-radius: 20px; cursor: pointer; font-size: 0.95rem; }
    .back-btn:hover { background: #e0e0e0; }

    .hero { margin-bottom: 28px; }
    .hero-title { font-size: clamp(1.8rem, 4.2vw, 3rem); font-weight: 700; letter-spacing: -0.02em; line-height: 1.15; margin: 0 0 18px; }
    .hero-list { list-style: none; padding: 0; margin: 0; }
    .hero-list li { font-size: 1.05rem; line-height: 1.7; margin: 10px 0; }

    .group { margin: 28px 0; }
    .group h3 { font-size: 1.15rem; margin: 0 0 12px; }

    .pill { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin: 12px 0; padding: 30px 20px; border: 1px solid var(--border); border-radius: 16px; cursor: pointer; transition: border-color .2s, box-shadow .2s; font-size: 1.05rem; }
    .pill .label { font-weight: 600; }
    .pill .price-right { color: var(--muted); font-weight: 600; white-space: nowrap; }
    .pill:hover { border-color: var(--blue); }
    .pill.selected { border: 2px solid var(--blue); box-shadow: 0 0 0 2px rgba(0,113,227,0.15) inset; }
    .pill.disabled { color: var(--muted); cursor: not-allowed; background: #f9f9f9; }

    .note { font-size: 0.9rem; color: var(--muted); margin-top: 6px; }

    .checkout { position: sticky; bottom: 0; left: 0; width: 100%; background: #fff; border-top: 1px solid var(--border); padding: 20px 30px; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 12px; box-shadow: 0 -4px 10px rgba(0,0,0,0.05); z-index: 100; }
    .total { font-size: 1.5rem; font-weight: 700; }
    .add-to-bag { padding: 14px 26px; font-size: 1.2rem; background: var(--blue); color: white; border: none; border-radius: 999px; cursor: pointer; transition: background .2s; }
    .add-to-bag:hover { background: #005bb5; }
  </style>
</head>
<body>
  <header>
    <h1>Buy BoibyBook Pro</h1>
  </header>

  <div class="tabs">
    <div class="tab active" data-size="14">14-inch</div>
    <div class="tab" data-size="16">16-inch</div>
  </div>

  <div class="models" id="models"></div>

  <div class="configurator" id="configurator" style="display:none;">
    <button class="back-btn" id="backBtn">‚Üê Back</button>
    <div class="hero">
      <h2 class="hero-title" id="heroTitle"></h2>
      <ul class="hero-list" id="heroList"></ul>
    </div>
    <div id="options"></div>
    <div class="checkout">
      <div class="total" id="finalPrice"></div>
      <button class="add-to-bag">Add to Bag</button>
    </div>
  </div>

<script>
const baseConfigs = {
  "B1 Pro 14": {
    price: 2999,
    name: "BoibyBook Pro 14-inch B1 Pro",
    upgrades: {
      coating: ["No anti-reflective coating (base)", "Anti-reflective display coating (+A$100)"],
      chip: ["Boiby B1 Pro chip with 12-core CPU and 20-core GPU (base)", "Boiby B1 Pro chip with 14-core CPU and 24-core GPU (+A$300)"],
      memory: ["32 GB unified memory (base)", "48 GB unified memory (+A$200)", "64 GB unified memory (+A$400)", "96 GB unified memory (+A$600)"],
      storage: ["512 GB SSD storage (base)", "1 TB SSD storage (+A$100)", "2 TB SSD storage (+A$200)", "4 TB SSD storage (+A$400)", "8 TB SSD storage (+A$800)"],
      adapter: ["95 W USB-C Power Adapter (base)", "140 W USB-C Power Adapter (+A$50)"]
    }
  },
  "B1 Max 14": {
    price: 4499,
    name: "BoibyBook Pro 14-inch B1 Max",
    upgrades: {
      coating: ["No anti-reflective coating (base)", "Anti-reflective display coating (+A$100)"],
      chip: ["Boiby B1 Max chip with 16-core CPU and 36-core GPU (base)", "Boiby B1 Max chip with 16-core CPU and 48-core GPU (+A$600)"],
      memory: ["48 GB unified memory (base)", "64 GB unified memory (+A$200)", "96 GB unified memory (+A$600)", "128 GB unified memory (+A$1200)", "256 GB unified memory (+A$2400)"],
      storage: ["1 TB SSD storage (base)", "2 TB SSD storage (+A$100)", "4 TB SSD storage (+A$300)", "8 TB SSD storage (+A$700)", "12 TB SSD storage (+A$1500)"],
      adapter: ["95 W USB-C Power Adapter (base)", "140 W USB-C Power Adapter (+A$50)"]
    }
  },
  "B1 Pro 16": {
    price: 3499,
    name: "BoibyBook Pro 16-inch B1 Pro",
    upgrades: JSON.parse(JSON.stringify(this["B1 Pro 14"].upgrades)) // deep copy
  },
  "B1 Max 16": {
    price: 4999,
    name: "BoibyBook Pro 16-inch B1 Max",
    upgrades: JSON.parse(JSON.stringify(this["B1 Max 14"].upgrades))
  }
};

const addons = {
  mouse: ["Boiby Pro Mouse (+A$50)"],
  keyboard: ["Boiby Pro Keyboard (+A$150)", "Boiby Pro Keyboard with Number Pad (+A$200)"],
  monitor: ["Boiby HDR Display 27-inch (IPS 1440p 240Hz) (+A$499)", "Boiby Studio Display OLED 27-inch (1440p 360Hz) (+A$1199)"]
};

let selectedModel = null;
let selectedOptions = {};

const cleanLabel = opt => opt.split("(")[0].trim();
const rightPrice = opt => {
  const m = opt.match(/\+A\$(\d+)/);
  return m ? "+A$" + m[1] : "";
};

document.querySelectorAll(".card").forEach(card => {
  card.addEventListener("click", () => {
    selectedModel = card.getAttribute("data-model");
    document.getElementById("models").style.display = "none";
    showConfigurator();
  });
});

document.getElementById("backBtn").addEventListener("click", () => {
  document.getElementById("configurator").style.display = "none";
  document.getElementById("models").style.display = "flex";
});

function showConfigurator() {
  const config = baseConfigs[selectedModel];
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";
  selectedOptions = {};
  document.getElementById("heroTitle").innerText = `Customise your ${config.name}`;

  // Upgrade groups
  for (let category in config.upgrades) {
    const group = document.createElement("div");
    group.className = "group";
    const h3 = document.createElement("h3");
    h3.innerText = category.charAt(0).toUpperCase() + category.slice(1);
    group.appendChild(h3);

    config.upgrades[category].forEach((opt, idx) => {
      const pill = document.createElement("div");
      pill.className = "pill";
      pill.innerHTML = `<span class="label">${cleanLabel(opt)}</span><span class="price-right">${rightPrice(opt)}</span>`;

      pill.addEventListener("click", () => {
        if (pill.classList.contains("disabled")) return;
        group.querySelectorAll(".pill").forEach(p => p.classList.remove("selected"));
        pill.classList.add("selected");
        selectedOptions[category] = opt;

        handleDependencies();
        renderHeroSummary();
        updatePrice();
      });

      // Default select first option
      if (idx === 0) {
        pill.classList.add("selected");
        selectedOptions[category] = opt;
      }

      group.appendChild(pill);
    });

    optionsDiv.appendChild(group);
  }

  // Add-ons
  const addonsGroup = document.createElement("div");
  addonsGroup.className = "group";
  const addonsTitle = document.createElement("h3");
  addonsTitle.innerText = "Add-ons";
  addonsGroup.appendChild(addonsTitle);

  for (let sub in addons) {
    const subTitle = document.createElement("h4");
    subTitle.innerText = sub.charAt(0).toUpperCase() + sub.slice(1);
    addonsGroup.appendChild(subTitle);

    addons[sub].forEach(opt => {
      const pill = document.createElement("div");
      pill.className = "pill";
      pill.innerHTML = `<span class="label">${cleanLabel(opt)}</span><span class="price-right">${rightPrice(opt)}</span>`;
      pill.addEventListener("click", () => {
        pill.classList.toggle("selected");
        if (!selectedOptions.addons) selectedOptions.addons = [];
        if (pill.classList.contains("selected")) {
          selectedOptions.addons.push(opt);
        } else {
          selectedOptions.addons = selectedOptions.addons.filter(a => a !== opt);
        }
        renderHeroSummary();
        updatePrice();
      });
      addonsGroup.appendChild(pill);
    });
  }

  optionsDiv.appendChild(addonsGroup);
  document.getElementById("configurator").style.display = "block";

  handleDependencies();
  renderHeroSummary();
  updatePrice();
}

function handleDependencies() {
  const optionsDiv = document.getElementById("options");
  if (!selectedOptions.chip) return;

  const chip = selectedOptions.chip;

  // Memory
  const memoryGroup = Array.from(optionsDiv.querySelectorAll(".group"))
    .find(g => g.querySelector("h3").innerText.toLowerCase() === "memory");
  memoryGroup.querySelectorAll(".pill").forEach(pill => pill.classList.remove("disabled"));

  if (selectedModel.includes("B1 Pro")) {
    memoryGroup.querySelectorAll(".pill").forEach(p => {
      if (p.textContent.includes("96 GB") && !chip.includes("14-core")) p.classList.add("disabled");
    });
  }

  if (selectedModel.includes("B1 Max")) {
    memoryGroup.querySelectorAll(".pill").forEach(p => {
      if ((p.textContent.includes("128 GB") || p.textContent.includes("256 GB")) && !chip.includes("48-core")) p.classList.add("disabled");
    });
  }

  // Storage
  const storageGroup = Array.from(optionsDiv.querySelectorAll(".group"))
    .find(g => g.querySelector("h3").innerText.toLowerCase() === "storage");
  storageGroup.querySelectorAll(".pill").forEach(pill => pill.classList.remove("disabled"));

  if (selectedModel.includes("B1 Max")) {
    storageGroup.querySelectorAll(".pill").forEach(p => {
      if (p.textContent.includes("12 TB") && !chip.includes("48-core")) p.classList.add("disabled");
    });
  }

  // Auto-deselect invalid selections
  ["memory", "storage"].forEach(cat => {
    const group = cat === "memory" ? memoryGroup : storageGroup;
    const selected = selectedOptions[cat];
    if (selected) {
      const pill = Array.from(group.querySelectorAll(".pill"))
        .find(p => cleanLabel(p.textContent) === cleanLabel(selected));
      if (pill.classList.contains("disabled")) {
        const firstValid = Array.from(group.querySelectorAll(".pill"))
          .find(p => !p.classList.contains("disabled"));
        firstValid.classList.add("selected");
        selectedOptions[cat] = firstValid.textContent;
      }
    }
  });
}

function renderHeroSummary() {
  const list = document.getElementById("heroList");
  list.innerHTML = "";
  for (let category in selectedOptions) {
    if (category === "addons") {
      selectedOptions.addons.forEach(a => list.appendChild(li(cleanLabel(a))));
    } else {
      list.appendChild(li(cleanLabel(selectedOptions[category])));
    }
  }
}

function updatePrice() {
  let price = baseConfigs[selectedModel].price;
  for (let category in selectedOptions) {
    const val = selectedOptions[category];
    if (Array.isArray(val)) {
      val.forEach(opt => { const m = opt.match(/\+A\$(\d+)/); if (m) price += parseInt(m[1],10); });
    } else {
      const m = val.match(/\+A\$(\d+)/);
      if (m) price += parseInt(m[1],10);
    }
  }
  document.getElementById("finalPrice").innerText = `Total: A$${price}`;
}

function li(text) { const el = document.createElement('li'); el.textContent = text; return el; }
</script>

</body>
</html>
