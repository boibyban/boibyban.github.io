<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Buy bDesk</title>
  <style>
    :root {
      --blue: #0071e3;
      --border: #d2d2d7;
      --text: #1d1d1f;
      --muted: #6e6e73;
      --bg: #fff;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: opacity 0.3s ease;
    }

    body.fade-out { opacity: 0.5; }

    header { text-align: center; padding: 28px 16px; border-bottom: 1px solid var(--border); transition: all 0.3s ease; }
    h1 { font-size: 1.9rem; margin: 0; font-weight: 700; }
    .tabs { display: flex; justify-content: center; gap: 12px; margin: 20px 0; transition: opacity 0.3s ease; }
    .tab { padding: 10px 22px; border: 1px solid var(--border); border-radius: 999px; cursor: pointer; transition: all .15s; }
    .tab.active { background: var(--blue); color: #fff; border-color: var(--blue); }

    .models, .configurator, .confirmation { max-width: 1200px; margin: auto; padding: 20px; }
    .models { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 25px; }
    .card { border: 1px solid var(--border); border-radius: 16px; padding: 20px; background: #fff; transition: box-shadow .15s, transform .06s; display: flex; flex-direction: column; }
    .card:hover { border-color: var(--blue); transform: translateY(-2px); }
    .card-content { display: flex; gap: 15px; margin-bottom: 15px; }
    .card-image { width: 140px; height: 140px; border-radius: 8px; overflow: hidden; background: #f5f5f7; display: flex; align-items: center; justify-content: center; }
    .card-image img { max-width: 100%; max-height: 100%; transition: opacity 0.3s ease; }
    .card-details { flex: 1; }
    .card h2 { font-size: 1.3rem; margin: 0 0 6px; font-weight: 600; }
    .price { font-size: 1.05rem; font-weight: 500; margin: 6px 0 12px; color: var(--muted); }
    .card ul { margin: 0; padding-left: 20px; color: var(--muted); font-size: 0.9rem; }
    .color-selector { display: flex; gap: 10px; margin: 10px 0; }
    .color-pill { padding: 6px 12px; border: 1px solid var(--border); border-radius: 999px; cursor: pointer; font-size: 0.9rem; transition: all 0.2s; }
    .color-pill.selected { background: var(--blue); color: #fff; border-color: var(--blue); }
    .select-btn { margin-top: auto; padding: 10px 0; background: var(--blue); color: #fff; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: background .2s; }
    .select-btn:hover { background: #005bb5; }
    .back-btn { margin: 10px 0 20px; padding: 8px 18px; background: #f5f5f7; border: none; border-radius: 999px; cursor: pointer; font-size: 0.95rem; }
    .back-btn:hover { background: #e6e6e9; }
    .hero { margin-bottom: 24px; }
    .hero-title { font-size: clamp(1.8rem, 4vw, 2.4rem); font-weight: 700; letter-spacing: -0.02em; line-height: 1.2; margin: 0 0 12px; }
    .hero-content { display: flex; gap: 30px; align-items: flex-start; }
    .hero-image { width: 280px; flex-shrink: 0; border-radius: 0; overflow: hidden; }
    .hero-image img { width: 100%; display: block; transition: opacity 0.3s ease; }
    .hero-list { list-style: none; padding: 0; margin: 0; color: var(--muted); flex: 1; }
    .hero-list li { font-size: 1rem; line-height: 1.6; margin: 6px 0; }
    .group { margin: 24px 0; position: relative; }
    .group h3 { font-size: 1.1rem; margin: 0 0 10px; display: flex; align-items: center; gap: 8px; }
    .info-icon { display: inline-flex; align-items: center; justify-content: center; width: 18px; height: 18px; border-radius: 50%; background: var(--muted); color: white; font-size: 12px; cursor: pointer; transition: background 0.2s; }
    .info-icon:hover { background: var(--blue); }
    .pill { display: flex; justify-content: space-between; align-items: center; padding: 28px 20px; border: 1px solid var(--border); border-radius: 12px; margin: 10px 0; cursor: pointer; background: #fff; transition: border-color .12s, box-shadow .12s, transform .06s; }
    .pill:hover { border-color: var(--blue); transform: translateY(-2px); }
    .pill.selected { border: 2px solid var(--blue); box-shadow: 0 4px 14px rgba(0,113,227,0.08); }
    .pill.disabled { opacity: .6; cursor: not-allowed; background: #fbfbfb; }
    .pill .label { font-weight: 600; }
    .pill .price-right { color: var(--muted); font-weight: 600; white-space: nowrap; }
    .note { font-size: .9rem; color: var(--muted); margin-top: 6px; }
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
    .modal-overlay.visible { opacity: 1; visibility: visible; }
    .modal { background: white; border-radius: 16px; padding: 24px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transform: translateY(20px); transition: transform 0.3s ease; }
    .modal-overlay.visible .modal { transform: translateY(0); }
    .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .modal-title { font-size: 1.4rem; font-weight: 600; margin: 0; }
    .modal-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--muted); }
    .modal-content { line-height: 1.6; }
    .modal-content p { margin: 0 0 16px; }
    .modal-content ul { margin: 0 0 16px; padding-left: 20px; }
    .checkout { position: sticky; bottom: 0; left: 0; right: 0; width: auto; max-width: 100vw; box-sizing: border-box; background: #fff; border-top: 1px solid var(--border); padding: 18px; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 12px; z-index: 100; overflow-x: hidden; }
    .total { font-size: 1.4rem; font-weight: 700; }
    .add-to-bag { padding: 12px 22px; font-size: 1.05rem; background: var(--blue); color: #fff; border: none; border-radius: 999px; cursor: pointer; transition: background .2s; }
    .add-to-bag:hover { background: #005bb5; }
    .confirmation { text-align: center; display: none; }
    .confirmation-image { width: 300px; margin: 0 auto 20px; border-radius: 12px; overflow: hidden; }
    .confirmation-image img { width: 100%; }
    .confirmation-details { max-width: 600px; margin: 0 auto; text-align: left; background: #f9f9f9; padding: 20px; border-radius: 12px; }
    .confirmation-title { font-size: 2.2rem; margin-bottom: 10px; color: #0071e3; }
    .confirmation-model { font-size: 1.4rem; margin-bottom: 20px; }
    .confirmation-list { list-style: none; padding: 0; margin: 0 0 20px; }
    .confirmation-list li { padding: 8px 0; border-bottom: 1px solid #eee; }
    .confirmation-total { font-size: 1.6rem; font-weight: 700; text-align: center; margin-top: 20px; }
    @media (max-width: 900px) { .models { grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); } .hero-content { flex-direction: column; } .hero-image { width: 100%; max-width: 300px; margin: 0 auto; } }
    @media (max-width: 600px) { .pill { padding: 14px; } .checkout { flex-direction: column; align-items: stretch; text-align: center; } .add-to-bag { width: 100%; } .card-content { flex-direction: column; } .card-image { width: 100%; height: 180px; margin-bottom: 15px; } }
  </style>
</head>
<body>
  <header>
    <h1 id="headerTitle">Buy bDesk</h1>
  </header>

  <main>
    <div class="models" id="models"><!-- cards inserted by JS --></div>

    <div class="configurator" id="configurator" style="display:none;">
      <button class="back-btn" id="backBtn">← Back</button>
      <div class="hero">
        <h2 class="hero-title" id="heroTitle"></h2>
        <div class="hero-content">
          <div class="hero-image" id="heroImage"></div>
          <ul class="hero-list" id="heroList"></ul>
        </div>
      </div>
      <div id="options"></div>
    </div>

    <div class="confirmation" id="confirmation">
      <h2 class="confirmation-title">Order Confirmed!</h2>
      <div class="confirmation-image" id="confirmationImage"></div>
      <h3 class="confirmation-model" id="confirmationModel"></h3>
      <div class="confirmation-details">
        <h4>Order Summary:</h4>
        <ul class="confirmation-list" id="confirmationList"></ul>
        <div class="confirmation-total" id="confirmationTotal"></div>
      </div>
      <button class="back-btn" id="confirmationBackBtn" style="margin-top: 30px;">← Back to Store</button>
    </div>
  </main>

  <div class="modal-overlay" id="memoryModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">Memory Guide</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-content">
        <p><strong>How much memory is right for you?</strong></p>
        <p>Our unified memory architecture allows the CPU and GPU to access the same memory pool. General guidance:</p>
        <p><strong>16 GB:</strong> General use, light multitasking.</p>
        <p><strong>24 GB:</strong> Moderate multitasking, creative work.</p>
        <p><strong>32 GB:</strong> Intensive workflows: 4K editing, VMs, 3D work.</p>
      </div>
    </div>
  </div>

  <div class="checkout" id="checkout">
    <div class="total" id="finalPrice">Total: $0</div>
    <button class="add-to-bag" id="addToBagBtn">Add to Bag</button>
  </div>

  <script>
    (function(){
      const colors = ['Silver'];
      let selectedColor = 'Silver';
      let selectedModel = 'B5';
      let selectedOptions = {};
      const basePrice = 1899;

      const bDeskConfig = {
        "B5": {
          price: basePrice,
          display: "24-inch 4.5K IPS display",
          ports: [
            "3 Thunderbolt 5 (USB Type-C) ports",
            "2 USB 3 (Type-A) ports",
            "Headphone Jack",
            "Gigabit Ethernet"
          ],
          upgrades: {
            memory: ["16 GB unified memory (base)","24 GB unified memory (+$100)","32 GB unified memory (+$200)"],
            storage: ["512 GB SSD storage (base)","1 TB SSD storage (+$100)","2 TB SSD storage (+$200)"],
            coating: ["No anti-reflective coating (base)","Anti-reflective coating (+$150)"],
            ethernet: ["Gigabit Ethernet (base)","2.5 Gb Ethernet (+$50)"],
            extras: ["Pro Keyboard with Touch ID (base)","Extra Numpad (+$50)","Extra Pro Trackpad + Pro Mouse (+$50)"]
          }
        }
      };

      const $ = q => document.querySelector(q);

      function priceDelta(opt){
        if(!opt) return 0;
        const m = opt.match(/\+\$(\d+)/);
        return m ? parseInt(m[1],10) : 0;
      }

      function formatPrice(n){ return `$${n.toLocaleString('en-US')}`; }

      function renderModels(){
        const container = $('#models');
        container.innerHTML = '';
        const cfg = bDeskConfig[selectedModel];
        const card = document.createElement('div');
        card.className = 'card';
        const imageUrl = `bDesk${selectedColor}.png`;
        card.innerHTML = `
          <div class="card-content">
            <div class="card-image"><img src="${imageUrl}" alt="bDesk ${selectedColor}"></div>
            <div class="card-details">
              <h2>bDesk - ${selectedModel}</h2>
              <p class="price">From ${formatPrice(cfg.price)}</p>
              <ul>
                <li>${cfg.display}</li>
              </ul>
              <p><strong>Ports:</strong></p>
              <ul>${cfg.ports.map(p=>`<li>${p}</li>`).join('')}</ul>
            </div>
          </div>
          <div class="color-selector">${colors.map(c=>`<div class="color-pill ${c===selectedColor?'selected':''}" data-color="${c}">${c}</div>`).join('')}</div>
          <button class="select-btn">Select</button>
        `;
        container.appendChild(card);

        // color selection
        card.querySelectorAll('.color-pill').forEach(pill=>{
          pill.addEventListener('click',()=>{ 
            selectedColor = pill.dataset.color; 
            card.querySelector('img').src = `bDesk${selectedColor}.png`;
            card.querySelectorAll('.color-pill').forEach(p=>p.classList.toggle('selected',p.dataset.color===selectedColor));
          });
        });

        card.querySelector('.select-btn').addEventListener('click',()=>{
          $('#models').style.display='none';
          $('#configurator').style.display='block';
          showConfigurator();
        });
      }

      function showConfigurator(){
        const cfg = bDeskConfig[selectedModel];
        const optionsDiv = $('#options'); optionsDiv.innerHTML='';
        selectedOptions={};
        $('#heroTitle').innerText=`Customize your bDesk — ${selectedModel}`;
        $('#heroImage').innerHTML=`<img src="bDesk${selectedColor}.png" alt="${selectedModel}">`;

        Object.keys(cfg.upgrades).forEach(cat=>{
          const group=document.createElement('div'); group.className='group';
          const h3=document.createElement('h3'); h3.innerText=cat.charAt(0).toUpperCase()+cat.slice(1);
          group.appendChild(h3);
          cfg.upgrades[cat].forEach((opt,idx)=>{
            const pill=document.createElement('div');
            pill.className='pill';
            pill.dataset.cat=cat; pill.dataset.value=opt;
            pill.innerHTML=`<span class="label">${opt}</span><span class="price-right">${priceDelta(opt)?'+$'+priceDelta(opt):''}</span>`;
            pill.addEventListener('click',()=>{
              Array.from(group.querySelectorAll('.pill')).forEach(p=>p.classList.remove('selected'));
              pill.classList.add('selected');
              selectedOptions[cat]=pill.dataset.value;
              updatePrice();
            });
            if(idx===0){ pill.classList.add('selected'); selectedOptions[cat]=opt; }
            group.appendChild(pill);
          });
          optionsDiv.appendChild(group);
        });
        updatePrice();
      }

      function updatePrice(){
        let price=bDeskConfig[selectedModel].price;
        Object.keys(selectedOptions).forEach(cat=>price+=priceDelta(selectedOptions[cat]));
        $('#finalPrice').innerText=`Total: ${formatPrice(price)}`;
      }

      function showConfirmation(){
        const cfg=bDeskConfig[selectedModel];
        let price=cfg.price;
        $('#configurator').style.display='none';
        $('#checkout').style.display='none';
        $('#confirmation').style.display='block';
        $('#confirmationImage').innerHTML=`<img src="bDesk${selectedColor}.png" alt="${selectedModel}">`;
        $('#confirmationModel').textContent=`${selectedModel} - ${selectedColor}`;
        const list=$('#confirmationList'); list.innerHTML='';
        list.appendChild(li(cfg.display));
        Object.keys(selectedOptions).forEach(cat=>{
          list.appendChild(li(`${cat}: ${selectedOptions[cat]}`));
          price+=priceDelta(selectedOptions[cat]);
        });
        $('#confirmationTotal').textContent=`Total: ${formatPrice(price)}`;
      }

      function li(text){ const el=document.createElement('li'); el.textContent=text; return el; }

      document.addEventListener('DOMContentLoaded',()=>{
        renderModels();
        $('#addToBagBtn').addEventListener('click',showConfirmation);
        $('#backBtn').addEventListener('click',()=>{
          $('#configurator').style.display='none'; $('#models').style.display='grid';
        });
        $('#confirmationBackBtn').addEventListener('click',()=>{
          $('#confirmation').style.display='none'; $('#models').style.display='grid'; $('#checkout').style.display='flex';
        });
      });
    })();
  </script>
</body>
</html>
