<script>
  const ratingMap = ["All Ages", "Ages 9+", "Ages 13+", "Restricted 17+"];

  document.getElementById('ratingForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData(form);

    let highestRating = 0;
    const contentTags = [];

    // Get all select inputs and loop through them directly
    const selects = form.querySelectorAll('select');

    selects.forEach(select => {
      const [levelStr, label] = select.value.split(':');
      const level = parseInt(levelStr);
      const name = select.name;

      // Force readable name (e.g., crudeHumour â†’ Crude Humour)
      const readableName = name
        .replace(/([A-Z])/g, ' $1')
        .replace(/^./, str => str.toUpperCase());

      if (level > 0) {
        contentTags.push(`${readableName}: ${label}`);
      }

      if (!isNaN(level)) {
        highestRating = Math.max(highestRating, level);
      }
    });

    const gameName = formData.get("gameName");
    const ratingText = ratingMap[highestRating];

    let resultHTML = `
      <div class="result-title">Game "${gameName}" is rated:</div>
      <div class="result-title">${ratingText}</div>
    `;

    if (contentTags.length > 0) {
      resultHTML += `<p>Selected content factors:</p><ul>`;
      contentTags.forEach(tag => {
        resultHTML += `<li>${tag}</li>`;
      });
      resultHTML += `</ul>`;
    } else {
      resultHTML += `<p>Suitable for everyone.</p>`;
    }

    // Replace form with result
    document.getElementById('form-container').innerHTML = resultHTML;
  });
</script>
