<script>
    // Get ban data from localStorage
    const banData = JSON.parse(localStorage.getItem('banData'));
    
    if (banData) {
        // Set ban title based on duration
        const banTitle = document.getElementById('banTitle');
        const mainMessage = document.getElementById('mainMessage');
        const actionBtn = document.getElementById('actionBtn');
        
        if (banData.duration === 'permanent') {
            banTitle.innerHTML = '<span style="color: #FFF">Account Terminated</span>';
            
            // Update main message for termination
            mainMessage.textContent = 'Due to repeated or severe violations of our Terms of Use and Community Rules, your account has been permanently banned. You can no longer use your Boiby account.';
            
            // Change button for termination
            actionBtn.textContent = 'Logout';
            actionBtn.className = 'btn btn-secondary';
        } else if (banData.duration === 'limit') {
            banTitle.innerHTML = 'Your account is <span style="color: #FFF">limited</span>';
            
            // Update main message for account limitation
            mainMessage.textContent = 'Due to violations of our Terms of Use and Community Rules, some features on your account have been temporarily disabled or limited. Future violations may result in additional actions being taken against your account.';
        } else {
            // Convert day counts to years/decades if exact multiples
            let durationText = '';
            const durationDays = parseInt(banData.duration);
            
            if (!isNaN(durationDays)) {
                if (durationDays % 3650 === 0) {
                    const decades = durationDays / 3650;
                    durationText = `${decades} Decade${decades !== 1 ? 's' : ''}`;
                } else if (durationDays % 365 === 0) {
                    const years = durationDays / 365;
                    durationText = `${years} Year${years !== 1 ? 's' : ''}`;
                } else {
                    durationText = `${durationDays} Day${durationDays !== 1 ? 's' : ''}`;
                }
            } else {
                durationText = `${banData.duration} Day${banData.duration !== '1' ? 's' : ''}`;
            }
            
            banTitle.innerHTML = `<span style="color: #FFF">Banned for ${durationText}</span>`;
            
            // Update main message for temporary ban with additional text
            mainMessage.textContent = 'Due to violations of our Terms of Use and Community Rules, your account has been temporarily suspended. Future violations may result in additional actions being taken against your account.';
            
            // Change button for suspension
            actionBtn.textContent = 'Logout';
            actionBtn.className = 'btn btn-secondary';
        }
        
        // Set reviewed date
        document.getElementById('reviewedDate').textContent = banData.reviewedDate;
        
        // Set moderator note if exists
        if (banData.moderatorNote) {
            document.getElementById('moderatorNoteContainer').style.display = 'block';
            document.getElementById('moderatorNote').textContent = banData.moderatorNote;
        }
        
        // Set reason
        document.getElementById('reason').textContent = banData.reason;
        
        // Set ban message
        const banMessage = document.getElementById('banMessage');
        if (banData.duration === 'permanent') {
            banMessage.innerHTML = '<strong style="color: #fff;">Your account has been terminated. You can no longer use Boiby.</strong>';
        } else if (banData.duration === 'limit') {
            banMessage.innerHTML = '<strong style="color: #fff;">Your account has been limited. You can still use your account, but access to some features have been temporarily disabled or limited.</strong>';
        } else {
            banMessage.innerHTML = `<strong style="color: #fff;">Your account has been suspended. Your suspension ends on ${banData.endDate}.</strong>`;
        }
        
        // Display evidence if exists
        const evidenceMainContainer = document.getElementById('evidenceMainContainer');
        const noEvidenceMessage = document.getElementById('noEvidenceMessage');
        
        if (banData.evidence && banData.evidence.length > 0) {
            noEvidenceMessage.style.display = 'none';
            
            banData.evidence.forEach((item, index) => {
                // Create container for this evidence item
                const evidenceContainer = document.createElement('div');
                evidenceContainer.style.marginBottom = '0px';
                
                // Create header for this evidence item
                const evidenceHeader = document.createElement('p');
                evidenceHeader.textContent = `Evidence Item ${index + 1}:`;
                evidenceHeader.className = 'evidence-header';
                
                // Create box for evidence content
                const evidenceBox = document.createElement('div');
                evidenceBox.className = 'evidence-content';
                evidenceBox.textContent = item;
                
                // Assemble the elements
                evidenceContainer.appendChild(evidenceHeader);
                evidenceContainer.appendChild(evidenceBox);
                evidenceMainContainer.appendChild(evidenceContainer);
            });
        } else {
            noEvidenceMessage.style.display = 'block';
        }
        
        // Make buttons stack on mobile
        if (window.innerWidth <= 480) {
            const buttonContainer = document.getElementById('buttonContainer');
            buttonContainer.className = 'text-center btn-group';
        }
    } else {
        // No ban data found - redirect back to form
        window.location.href = 'banpanel-v2.html';
    }
    
    // Handle window resize
    window.addEventListener('resize', function() {
        const buttonContainer = document.getElementById('buttonContainer');
        if (window.innerWidth <= 480) {
            buttonContainer.className = 'text-center btn-group';
        } else {
            buttonContainer.className = 'text-center';
        }
    });
</script>
